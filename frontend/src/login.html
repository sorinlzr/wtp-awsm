<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div class="login-box">
    <h2>Login</h2>
    <img src="images/mindShareLogo.png" alt="Logo" title="Login" />
    <form action="/api/login" method="post">
      <div class="user-box">
        <input type="text" name="username" required="">
        <label>Username</label>
      </div>
      <div class="user-box">
        <input type="password" name="password" required="">
        <label>Password</label>
      </div>
      <button type="submit">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        Login
      </button>
      <a href="register.html">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        or register

      </a>
      <p id="successMessage" class="success-message"></p>
    </form>
  </div>
  <script>
    // Get the success message from the URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const successMessage = urlParams.get('success');

    // Check if the success message should be displayed
    const displaySuccess = sessionStorage.getItem('successMessage');
    if (successMessage === 'registration_success' && displaySuccess) {
      const successElement = document.getElementById('successMessage');
      successElement.textContent = 'User registration successful. You can now login.'; // Customize the success message
      successElement.style.display = 'block'; // Make the success message visible

      // Set the flag to indicate that the success message has been displayed
      sessionStorage.setItem('successMessage', false);
      console.log("in the if of the script");
      sessionStorage.removeItem('successMessage');
    } 
    else {
      // Hide the success message if it shouldn't be displayed
      const successElement = document.getElementById('successMessage');
      successElement.style.display = 'none';
      console.log("in the else of the script");
      sessionStorage.removeItem('successMessage');
  }
  </script>
</body>

</html>